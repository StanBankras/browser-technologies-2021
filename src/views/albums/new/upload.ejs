<%- include('../../partials/head.ejs'); %>
<%- include('../../partials/header.ejs'); %>

<section class="upload">
  <h1>Upload photos</h1>
  
  <section class="images">
    <% album.photos.sort((a, b) => a.order - b.order).forEach(photo => { %>
    <div>
      <img src="data:image/jpeg;base64,<%= photo.base64 %>"/>
      <form action="/albums/new/<%= album.id %>/<%= photo.id %>/delete?userId=<%= userId %>" method="post">
        <button type="submit">Delete</button>
      </form>
    </div>
    <% }); %>
  </section>
  
  <form action="/albums/new/img?albumId=<%= album.id %>&userId=<%= userId %>" method="post" enctype="multipart/form-data">
    <label for="image">Add image to album</label>
    <input type="file" name="image" id="image">
    <button type="submit">Add</button>
  </form>
  <form action="/albums/new/upload?id=<%= album.id %>&userId=<%= userId %>" method="post">
    <button type="submit">Step 3</button>
  </form>
</section>

<%- include('../../partials/footer.ejs'); %>